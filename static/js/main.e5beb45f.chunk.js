(this.webpackJsonpwebgl=this.webpackJsonpwebgl||[]).push([[0],{52:function(e,t,i){"use strict";i.r(t);var n,r,o,a,s,c,d,l=i(0),h=i.n(l),u=i(32),m=i.n(u),p=i(4),f=i(2),b=i(5),g=i(6),j=function e(t){var i=t.fov,n=t.aspect,r=t.near,o=t.far,a=t.position;Object(f.a)(this,e),this.threeCamera=void 0,this.targetObject=function(e){},this.update=function(e){},this.threeCamera=new p.q(i,n,r,o),this.threeCamera.position.copy(a)},w=i(33),v=function(e){Object(b.a)(i,e);var t=Object(g.a)(i);function i(e){var n,r=e.fov,o=e.aspect,a=e.near,s=e.far,c=e.position,d=e.target,l=e.domElement;return Object(f.a)(this,i),(n=t.call(this,{fov:r,aspect:o,near:a,far:s,position:c})).domElement=void 0,n.controls=void 0,n.target=void 0,n.zoomSpeed=2,n.rotateSpeed=2,n.panSpeed=2,n.update=function(e){n.controls.update(),n.controls.target.copy(n.target)},n.targetObject=function(e){n.target.copy(e||n.target)},n.domElement=l,n.target=d,n.threeCamera.lookAt(d),n.controls=new w.a(n.threeCamera,n.domElement),n.controls.target.copy(d),n.controls.zoomSpeed=n.zoomSpeed,n.controls.rotateSpeed=n.rotateSpeed,n.controls.panSpeed=n.panSpeed,n.controls.update(),n}return i}(j),O=i(12),y=function e(t){var i=this,n=t.trailLength,r=t.colour;Object(f.a)(this,e),this.trailObject=void 0,this.geometry=void 0,this.material=void 0,this.positions=void 0,this.counter=void 0,this.trailLength=void 0,this.update=function(e){},this.addPoint=function(e){var t=i.counter++,n=new p.o;n.position.copy(e),n.updateMatrix(),i.trailObject.setMatrixAt(t,n.matrix),i.counter%=i.trailLength,i.trailObject.instanceMatrix.needsUpdate=!0},this.trailLength=n,this.counter=0,this.positions=new Array(this.trailLength),this.positions.fill(new p.D(0,0,0)),this.material=new p.l({color:r}),this.geometry=new p.y(7,5,5),this.trailObject=new p.g(this.geometry,this.material,this.trailLength),this.trailObject.instanceMatrix.needsUpdate=!0},S=function(e){Object(b.a)(i,e);var t=Object(g.a)(i);function i(e){var n,r=e.position,o=e.name,a=e.mass,s=e.radius,c=e.colour,d=e.initialVelocity,l=e.scene;return Object(f.a)(this,i),(n=t.call(this,{geometry:new p.y(s,32,32),material:new p.l({color:c,wireframe:!0}),scene:l,name:o})).mass=void 0,n.radius=void 0,n.colour=void 0,n.initialVelocity=new p.D(0,0,0),n.currentVelocity=new p.D(0,0,0),n.gravitationalConstant=667408e-16,n.trail=void 0,n.frameCount=0,n.frameUpdate=75,n.update=function(e){n.frameCount++,n.threeObject.rotateY(.1*e),n.threeObject.position.add(n.currentVelocity),n.frameCount===n.frameUpdate&&n.trail.addPoint(n.threeObject.position),n.frameCount%=n.frameUpdate},n.updateVelocity=function(e,t){e.forEach((function(e){if(e!==Object(O.a)(n)){var i=n.threeObject.position.distanceTo(e.threeObject.position),r=n.threeObject.position.clone().sub(e.threeObject.position).normalize().multiplyScalar(-1).multiplyScalar(n.gravitationalConstant*n.mass*e.mass/Math.pow(i,2)).divideScalar(n.mass);n.currentVelocity.add(r.multiplyScalar(t))}}))},n.turnOnTrails=function(){n.threeParentScene.add(n.trail.trailObject)},n.turnOffTrails=function(){n.threeParentScene.remove(n.trail.trailObject)},n.mass=a,n.radius=s,n.colour=c,n.threeObject.position.copy(r),n.initialVelocity=d,n.currentVelocity=n.initialVelocity,n.trail=new y({trailLength:100,colour:n.colour}),n}return i}((function e(t){var i=this,n=t.geometry,r=t.material,o=t.scene,a=t.name;Object(f.a)(this,e),this.threeObject=void 0,this.threeParentScene=void 0,this.geometry=void 0,this.material=void 0,this.name=void 0,this.update=function(e){i.threeObject.rotateX(1*e),i.threeObject.rotateY(1*e),i.threeObject.rotateZ(1*e)},this.geometry=n,this.material=r,this.name=a,this.threeParentScene=o,this.threeObject=new p.k(this.geometry,this.material),this.threeParentScene.add(this.threeObject)})),C=[],x=[{name:"Sun",mass:125e14,radius:796.34,colour:1048320,position:{x:0,y:0,z:-500},initialVelocity:{x:0,y:0,z:0}},{name:"Earth",mass:1e15,radius:63.71,colour:255,position:{x:5e3,y:0,z:-500},initialVelocity:{x:0,y:0,z:-.75}},{name:"Moon",mass:1e3,radius:17.37,colour:13421772,position:{x:5384,y:0,z:-500},initialVelocity:{x:0,y:-1,z:-.75}},{name:"Mars",mass:1e15,radius:63.71,colour:13369344,position:{x:-5e3,y:0,z:-500},initialVelocity:{x:0,y:0,z:.75}},{name:"Deimos",mass:1e3,radius:17.37,colour:13421772,position:{x:-5384,y:0,z:-500},initialVelocity:{x:0,y:1,z:.75}}],E=function(e,t){var i=[];return console.log(e),e.forEach((function(e){var n=new S({name:e.name,mass:e.mass,radius:e.radius,colour:new p.c(e.colour),position:new p.D(e.position.x,e.position.y,e.position.z),initialVelocity:new p.D(e.initialVelocity.x,e.initialVelocity.y,e.initialVelocity.z),scene:t});i.push(n)})),i},z=function(e){Object(b.a)(i,e);var t=Object(g.a)(i);function i(e){var n,r=e.enableGridX,o=e.enableGridY,a=e.enableGridZ,s=e.useCustomConfig;return Object(f.a)(this,i),(n=t.call(this)).gridSize=1e5,n.gridDivisions=300,n.gridColour=new p.c(6710886),n.gridX=new p.f(n.gridSize,n.gridDivisions,n.gridColour,n.gridColour),n.gridY=new p.f(n.gridSize,n.gridDivisions,n.gridColour,n.gridColour),n.gridZ=new p.f(n.gridSize,n.gridDivisions,n.gridColour,n.gridColour),n.planets=void 0,n.update=function(e){n.planets.forEach((function(t){t.updateVelocity(n.planets,e),t.update(e)}))},n.planets=E(s?C:x,n.threeScene),r&&(n.gridX.rotateZ(Math.PI/2),n.threeScene.add(n.gridX)),o&&(n.gridY.rotateX(Math.PI/2),n.threeScene.add(n.gridY)),a&&n.threeScene.add(n.gridZ),n.planets.forEach((function(e){e.turnOnTrails()})),n}return i}((function e(){Object(f.a)(this,e),this.threeScene=void 0,this.update=function(e){},this.threeScene=new p.w})),V=i(37),M=i(35),D=function e(t){var i=this,n=t.camera,r=t.scene,o=t.interactables;Object(f.a)(this,e),this.raycaster=new p.v,this.mouse=new p.C,this.camera=void 0,this.scene=void 0,this.interactables=void 0,this.onMouseMove=function(e){i.mouse.x=e.offsetX/window.innerWidth*2-1,i.mouse.y=-e.offsetY/window.innerHeight*2+1},this.findIntersectedObject=function(){i.raycaster.setFromCamera(i.mouse,i.camera);for(var e=i.raycaster.intersectObjects(i.scene.children),t=function(t){return{v:i.interactables.find((function(i){return i.threeObject.id===e[t].object.id}))}},n=0;n<e.length;n++){var r=t(n);if("object"===typeof r)return r.v}},this.update=function(e,t){var n=i.findIntersectedObject();n&&(e.selectedObjects=[n.threeObject])},this.camera=n,this.scene=r,this.interactables=o,window.addEventListener("mousemove",this.onMouseMove,!1)},P=i(36),L=i(53),T=i(55),A=i(8),F=function(){var e,t=function(){var t=e.result;JSON.parse(t).forEach((function(e){C.push(e)}))};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(L.a,{children:"Upload JSON config file"}),Object(A.jsx)(T.a,{type:"file",accept:".json",onChange:function(i){return function(i){(e=new FileReader).onloadend=t,i.target.files&&e.readAsText(i.target.files[0])}(i)}})]})},U=i(54),X=new p.b,Y=0,k=function e(){var t;requestAnimationFrame(e),Y=X.getDelta(),document.title="FPS: ".concat(Math.round(1/Y)),n.targetObject(null===(t=d.findIntersectedObject())||void 0===t?void 0:t.threeObject.position),d.update(s,Y),r.update(Y),n.update(Y),c.render(Y)},G=function(){n.threeCamera.aspect=window.innerWidth/window.innerHeight,n.threeCamera.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)},H=function(e){r=new z({enableGridX:!1,enableGridY:!1,enableGridZ:!0,useCustomConfig:e}),o=function(){var e;return(e=new p.F({antialias:!0})).setSize(window.innerWidth,window.innerHeight),e}(),n=new v({fov:90,aspect:window.innerWidth/window.innerHeight,near:.1,far:1e7,position:new p.D(-700,5e3,4e3),target:new p.D(0,0,-500),domElement:o.domElement}),d=new D({camera:n.threeCamera,scene:r.threeScene,interactables:r.planets}),document.body.appendChild(o.domElement),window.addEventListener("resize",G,!1),a=new M.a(r.threeScene,n.threeCamera),(s=new P.a(new p.C(window.innerWidth,window.innerHeight),r.threeScene,n.threeCamera)).edgeStrength=250,(c=new V.a(o)).addPass(a),c.addPass(s),k()},I=function(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(F,{}),Object(A.jsxs)(U.b,{children:[Object(A.jsx)(U.a,{onClick:function(e){return H(!0)},children:"START CUSTOM SCENE"}),Object(A.jsx)(U.a,{onClick:function(e){return H(!1)},children:"START DEFAULT SCENE"}),Object(A.jsx)(U.a,{onClick:function(e){return console.log(JSON.stringify(x))},children:"LOG DEFAULT SCENE"})]})]})};m.a.render(Object(A.jsx)(h.a.StrictMode,{children:Object(A.jsx)(I,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.e5beb45f.chunk.js.map