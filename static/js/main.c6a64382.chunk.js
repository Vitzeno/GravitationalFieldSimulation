(this.webpackJsonpwebgl=this.webpackJsonpwebgl||[]).push([[0],{52:function(e,t,i){"use strict";i.r(t);var n,r,o,a,c,s,d,l=i(0),u=i.n(l),h=i(32),m=i.n(h),p=i(4),f=i(2),b=i(5),g=i(6),j=function e(t){var i=t.fov,n=t.aspect,r=t.near,o=t.far,a=t.position;Object(f.a)(this,e),this.threeCamera=void 0,this.targetObject=function(e){},this.update=function(e){},this.threeCamera=new p.q(i,n,r,o),this.threeCamera.position.copy(a)},w=i(33),v=function(e){Object(b.a)(i,e);var t=Object(g.a)(i);function i(e){var n,r=e.fov,o=e.aspect,a=e.near,c=e.far,s=e.position,d=e.target,l=e.domElement;return Object(f.a)(this,i),(n=t.call(this,{fov:r,aspect:o,near:a,far:c,position:s})).domElement=void 0,n.controls=void 0,n.target=void 0,n.zoomSpeed=2,n.rotateSpeed=2,n.panSpeed=2,n.update=function(e){n.controls.update(),n.controls.target.copy(n.target)},n.targetObject=function(e){n.target.copy(e||n.target)},n.domElement=l,n.target=d,n.threeCamera.lookAt(d),n.controls=new w.a(n.threeCamera,n.domElement),n.controls.target.copy(d),n.controls.zoomSpeed=n.zoomSpeed,n.controls.rotateSpeed=n.rotateSpeed,n.controls.panSpeed=n.panSpeed,n.controls.update(),n}return i}(j),O=i(12),y=function e(t){var i=this,n=t.trailLength,r=t.colour;Object(f.a)(this,e),this.trailObject=void 0,this.geometry=void 0,this.material=void 0,this.positions=void 0,this.counter=void 0,this.trailLength=void 0,this.update=function(e){},this.addPoint=function(e){var t=i.counter++,n=new p.o;n.position.copy(e),n.updateMatrix(),i.trailObject.setMatrixAt(t,n.matrix),i.counter%=i.trailLength,i.trailObject.instanceMatrix.needsUpdate=!0},this.trailLength=n,this.counter=0,this.positions=new Array(this.trailLength),this.positions.fill(new p.D(0,0,0)),this.material=new p.l({color:r}),this.geometry=new p.y(7,5,5),this.trailObject=new p.g(this.geometry,this.material,this.trailLength),this.trailObject.instanceMatrix.needsUpdate=!0},S=function(e){Object(b.a)(i,e);var t=Object(g.a)(i);function i(e){var n,r=e.position,o=e.name,a=e.mass,c=e.radius,s=e.colour,d=e.initialVelocity,l=e.scene;return Object(f.a)(this,i),(n=t.call(this,{geometry:new p.y(c,32,32),material:new p.l({color:s,wireframe:!0}),scene:l,name:o})).mass=void 0,n.radius=void 0,n.colour=void 0,n.initialVelocity=new p.D(0,0,0),n.currentVelocity=new p.D(0,0,0),n.trail=void 0,n.frameCount=0,n.frameUpdate=75,n.update=function(e){n.frameCount++,n.threeObject.rotateY(.1*e),n.threeObject.position.add(n.currentVelocity),n.frameCount===n.frameUpdate&&n.trail.addPoint(n.threeObject.position),n.frameCount%=n.frameUpdate},n.updateVelocity=function(e,t){e.forEach((function(e){if(e!==Object(O.a)(n)){var i=n.threeObject.position.distanceTo(e.threeObject.position),r=n.threeObject.position.clone().sub(e.threeObject.position).normalize().multiplyScalar(-1).multiplyScalar(x*n.mass*e.mass/Math.pow(i,2)).divideScalar(n.mass);n.currentVelocity.add(r.multiplyScalar(t))}}))},n.turnOnTrails=function(){n.threeParentScene.add(n.trail.trailObject)},n.turnOffTrails=function(){n.threeParentScene.remove(n.trail.trailObject)},n.mass=a,n.radius=c,n.colour=s,n.threeObject.position.copy(r),n.initialVelocity=d,n.currentVelocity=n.initialVelocity,n.trail=new y({trailLength:100,colour:n.colour}),n}return i}((function e(t){var i=this,n=t.geometry,r=t.material,o=t.scene,a=t.name;Object(f.a)(this,e),this.threeObject=void 0,this.threeParentScene=void 0,this.geometry=void 0,this.material=void 0,this.name=void 0,this.update=function(e){i.threeObject.rotateX(1*e),i.threeObject.rotateY(1*e),i.threeObject.rotateZ(1*e)},this.geometry=n,this.material=r,this.name=a,this.threeParentScene=o,this.threeObject=new p.k(this.geometry,this.material),this.threeParentScene.add(this.threeObject)})),C=[],x=667408e-16,E=[{name:"Sun",mass:1989e13,radius:796.34,colour:1048320,position:{x:0,y:0,z:-500},initialVelocity:{x:0,y:0,z:0}},{name:"Mercury",mass:5972e10,radius:93.71,colour:12093307,position:{x:3e3,y:0,z:-500},initialVelocity:{x:0,y:1.35,z:0}},{name:"Venus",mass:5972e10,radius:93.71,colour:3700253,position:{x:6e3,y:0,z:-500},initialVelocity:{x:0,y:0,z:.95}},{name:"Earth",mass:5972e10,radius:93.71,colour:255,position:{x:1e4,y:0,z:-500},initialVelocity:{x:0,y:0,z:-.73}},{name:"Mars",mass:5972e10,radius:93.71,colour:13369344,position:{x:-15e3,y:0,z:-500},initialVelocity:{x:0,y:0,z:.59}}],z=function(e,t){var i=[];return console.log(V(5972e10,32e6)),console.log(e),e.forEach((function(e){var n=new S({name:e.name,mass:e.mass,radius:e.radius,colour:new p.c(e.colour),position:new p.D(e.position.x,e.position.y,e.position.z),initialVelocity:new p.D(e.initialVelocity.x,e.initialVelocity.y,e.initialVelocity.z),scene:t});i.push(n)})),i},V=function(e,t){return 2*Math.sqrt(x*e/t)},M=function(e){Object(b.a)(i,e);var t=Object(g.a)(i);function i(e){var n,r=e.enableGridX,o=e.enableGridY,a=e.enableGridZ,c=e.useCustomConfig;return Object(f.a)(this,i),(n=t.call(this)).gridSize=1e5,n.gridDivisions=50,n.gridColour=new p.c(6710886),n.gridX=new p.f(n.gridSize,n.gridDivisions,n.gridColour,n.gridColour),n.gridY=new p.f(n.gridSize,n.gridDivisions,n.gridColour,n.gridColour),n.gridZ=new p.f(n.gridSize,n.gridDivisions,n.gridColour,n.gridColour),n.planets=void 0,n.update=function(e){n.planets.forEach((function(t){t.updateVelocity(n.planets,e),t.update(e)}))},n.planets=z(c?C:E,n.threeScene),r&&(n.gridX.rotateZ(Math.PI/2),n.threeScene.add(n.gridX)),o&&(n.gridY.rotateX(Math.PI/2),n.threeScene.add(n.gridY)),a&&n.threeScene.add(n.gridZ),n.planets.forEach((function(e){e.turnOnTrails()})),n}return i}((function e(){Object(f.a)(this,e),this.threeScene=void 0,this.update=function(e){},this.threeScene=new p.w})),D=i(37),P=i(35),L=function e(t){var i=this,n=t.camera,r=t.scene,o=t.interactables;Object(f.a)(this,e),this.raycaster=new p.v,this.mouse=new p.C,this.camera=void 0,this.scene=void 0,this.interactables=void 0,this.onMouseMove=function(e){i.mouse.x=e.offsetX/window.innerWidth*2-1,i.mouse.y=-e.offsetY/window.innerHeight*2+1},this.findIntersectedObject=function(){i.raycaster.setFromCamera(i.mouse,i.camera);for(var e=i.raycaster.intersectObjects(i.scene.children),t=function(t){return{v:i.interactables.find((function(i){return i.threeObject.id===e[t].object.id}))}},n=0;n<e.length;n++){var r=t(n);if("object"===typeof r)return r.v}},this.update=function(e,t){var n=i.findIntersectedObject();n&&(e.selectedObjects=[n.threeObject])},this.camera=n,this.scene=r,this.interactables=o,window.addEventListener("mousemove",this.onMouseMove,!1)},T=i(36),A=i(53),U=i(55),F=i(8),X=function(){var e,t=function(){var t=e.result;JSON.parse(t).forEach((function(e){C.push(e)}))};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(A.a,{children:"Upload JSON config file"}),Object(F.jsx)(U.a,{type:"file",accept:".json",onChange:function(i){return function(i){(e=new FileReader).onloadend=t,i.target.files&&e.readAsText(i.target.files[0])}(i)}})]})},Y=i(54),k=new p.b,G=0,I=function e(){var t;requestAnimationFrame(e),G=k.getDelta(),document.title="FPS: ".concat(Math.round(1/G)),n.targetObject(null===(t=d.findIntersectedObject())||void 0===t?void 0:t.threeObject.position),d.update(c,G),r.update(G),n.update(G),s.render(G)},H=function(){n.threeCamera.aspect=window.innerWidth/window.innerHeight,n.threeCamera.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)},N=function(e){var t;r=new M({enableGridX:!1,enableGridY:!1,enableGridZ:!0,useCustomConfig:e}),o=function(){var e;return(e=new p.F({antialias:!0})).setSize(window.innerWidth,window.innerHeight),e}(),n=new v({fov:90,aspect:window.innerWidth/window.innerHeight,near:.1,far:1e7,position:new p.D(-700,5e3,4e3),target:new p.D(0,0,-500),domElement:o.domElement}),d=new L({camera:n.threeCamera,scene:r.threeScene,interactables:r.planets}),null===(t=document.getElementById("controls"))||void 0===t||t.remove(),document.body.appendChild(o.domElement),window.addEventListener("resize",H,!1),a=new P.a(r.threeScene,n.threeCamera),(c=new T.a(new p.C(window.innerWidth,window.innerHeight),r.threeScene,n.threeCamera)).edgeStrength=250,(s=new D.a(o)).addPass(a),s.addPass(c),I()},W=function(){return Object(F.jsxs)("div",{id:"controls",children:[Object(F.jsx)(X,{}),Object(F.jsxs)(Y.b,{children:[Object(F.jsx)(Y.a,{onClick:function(e){return N(!0)},children:"START CUSTOM SCENE"}),Object(F.jsx)(Y.a,{onClick:function(e){return N(!1)},children:"START DEFAULT SCENE"}),Object(F.jsx)(Y.a,{onClick:function(e){return console.log(JSON.stringify(E))},children:"LOG DEFAULT SCENE"})]})]})};m.a.render(Object(F.jsx)(u.a.StrictMode,{children:Object(F.jsx)(W,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.c6a64382.chunk.js.map